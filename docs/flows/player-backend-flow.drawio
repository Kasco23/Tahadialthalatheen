<mxfile host="app.diagrams.net" modified="2025-08-21T14:03:23.749Z" agent="5.0" version="24.7.17" etag="generated">
  <diagram name="Player Backend Flow" id="player-backend-flow">
    
<mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169">
  <root>
    <mxCell id="0"/>
    <mxCell id="1" parent="0"/>
    
    <!-- Start State -->
    <mxCell id="start" value="Game Available" style="ellipse;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="40" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Validate Game ID -->
    <mxCell id="validate" value="Validate Game ID\n(Supabase lookup)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="140" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Register Player -->
    <mxCell id="register" value="Register Player\n(Update players table)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="240" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Subscribe to Game -->
    <mxCell id="subscribe_game" value="Subscribe to Game\n(Realtime channel)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="340" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Sync Game State -->
    <mxCell id="sync_state" value="Sync Game State\n(Receive updates)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="440" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Submit Answers -->
    <mxCell id="submit_answers" value="Submit Answers\n(Send responses)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="200" y="540" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Receive Score Updates -->
    <mxCell id="receive_scores" value="Receive Scores\n(Live score sync)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="520" y="540" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Heartbeat Maintenance -->
    <mxCell id="heartbeat" value="Heartbeat\n(Connection alive)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="640" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- End State -->
    <mxCell id="end" value="Player Disconnected\n(Cleanup)" style="ellipse;whiteSpace=wrap;html=1;fillColor=#DC2626;fontColor=white;strokeColor=white;" vertex="1" parent="1">
      <mxGeometry x="360" y="740" width="120" height="60" as="geometry"/>
    </mxCell>
    
    <!-- Transitions -->
    <mxCell edge="1" parent="1" source="start" target="validate">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="validate" target="register">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="register" target="subscribe_game">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="subscribe_game" target="sync_state">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="sync_state" target="submit_answers">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="sync_state" target="receive_scores">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="sync_state" target="heartbeat">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="submit_answers" target="end">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="receive_scores" target="end">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    <mxCell edge="1" parent="1" source="heartbeat" target="end">
      <mxGeometry relative="1" as="geometry"/>
    </mxCell>
    
  </root>
</mxGraphModel>
  </diagram>
</mxfile>